# GitFlow

## 介绍

GitFlow 是一种 Git 工作流。简而言之，就是每一个特性（feature）的开发并不直接在主干上开发，而是在分支上开发，分支开发完毕后再合并到主干上。

## 分支模型

GitFlow 的分支模型主要包括以下几种类型的分支：

| 分支名称 | 分支说明 |
|---------|----------|
| `Production`, `Master` | 生产分支，即 `Master` 分支。只能从其他分支合并，不能直接修改 |
| `Release` | 发布分支，基于 `Develop` 分支创建，待发布完成后合并到 `Develop` 和 `Production` 分支去 |
| `Develop` | 主开发分支，包含所有要发布到下一个 `Release` 的代码，该分支主要合并其他分支内容 |
| `Feature` | 新功能分支，基于 `Develop` 分支创建，开发新功能，待开发完毕合并至 `Develop` 分支 |
| `Hotfix` | 修复分支，基于 `Production` 分支创建，待修复完成后合并到 `Develop` 和 `Production` 分支去，同时在 `Master` 上打一个tag |

### 主要分支（Master）

主要分支上存放的是最稳定的正式版本。主要分支上的代码必须是合并自经过多轮测试及已经发布一段时间且线上稳定的预发分支。

当一个版本开发完毕并可供发布时，需要将 `Release` 分支的内容合并到主要分支上。同时，每一次更新，都需要在主要分支上打上对应的版本号。

任何人不允许在主要分支上进行代码的直接提交，只接受其他分支的合入。

### 开发分支（Develop）

develop 分支用来整合各个 feature 分支。开发中的版本的源代码存放在这里。即用于日常开发，存放最新的开发版。

开发分支是主开发分支，其上更新的代码始终反映着下一个发布版本需要交付的新功能。当开发分支到达一个稳定的点并准备好发布时，应该从该点拉取一个预发分支并附上发布版本号。也有人称开发分支为集成分支，因为会基于该分支和持续集成工具做自动化的构建。

开发分支接受其他辅助分支的合入，最常见的就是功能分支，开发一个新功能时拉取新的功能分支，开发完成后再并入开发分支。需要注意的是，合入开发的分支必须保证功能完整，不影响开发分支的正常运行。

## GitFlow 工作流程

![GitFlow](./img/GitFlow.png)
