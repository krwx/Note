# 基本使用

- [基本使用](#基本使用)
  - [开始你的第一次打包](#开始你的第一次打包)
  - [使用配置文件](#使用配置文件)

## 开始你的第一次打包

全局安装 rollup：

```sh
npm install rollup --global
# or `npm i rollup -g` for short
```

让我们创建一个简单的项目：

```sh
mkdir -p my-rollup-project/src
cd my-rollup-project
```

创建入口文件 `src/main.js`：

```js
// src/main.js
import foo from './foo.js';
export default function () {
	console.log(foo);
}
```

创建一个名为 `foo.js` 的模块，它在入口文件中被导入：

```js
// src/foo.js
export default 'hello world!';
```

现在我们已经准备好进行一次打包：

```sh
rollup src/main.js -f cjs
```

`-f` 选项 (是 `--format` 的缩写) 指定了产物的类型 — 在本例中是 `CommonJS` (可以在 Node.js 中运行)。因为我们没有指定输出文件，所以它将直接打印到 `stdout`：

```txt
'use strict';

const foo = 'hello world!';

const main = function () {
	console.log(foo);
};

module.exports = main;
```

你也可以像这样将产物保存为文件：

```sh
rollup src/main.js -o bundle.js -f cjs
```

恭喜！你已经使用 Rollup 完成了一次打包！

## 使用配置文件

在项目根目录中创建一个名为 `rollup.config.mjs` 的文件，并添加以下代码：

```js
// rollup.config.mjs
export default {
	input: 'src/main.js',
	output: {
		file: 'bundle.js',
		format: 'cjs'
	}
};
```

运行命令，会根据配置文件打包：

```sh
rollup -c
```

`-c` 选项 (是 `--config` 的缩写) 告诉 Rollup 使用配置文件 `rollup.config.mjs`。
