# 布局

- [布局](#布局)
  - [视口（Viewport）](#视口viewport)
    - [主要视口类型](#主要视口类型)
      - [布局视口和视觉视口取值的说明](#布局视口和视觉视口取值的说明)
  - [视口Meta标签](#视口meta标签)
    - [获取视口尺寸](#获取视口尺寸)
      - [CSS视口单位](#css视口单位)
    - [常见应用场景](#常见应用场景)

## 视口（Viewport）

视口是**浏览器窗口中用于显示网页内容的可视区域**，它是前端响应式设计的基础概念。理解视口对于移动端适配和响应式开发至关重要。

### 主要视口类型

1、**布局视口（Layout Viewport）**

- 网页实际布局的尺寸
- 桌面浏览器中等于浏览器窗口大小
- 移动设备上通常默认为 `980px` 或类似宽度
- `vw、vh` 基于此视口计算

```js
// 布局视口宽度（不包含滚动条）
const layoutWidth = document.documentElement.clientWidth;

// 布局视口高度
const layoutHeight = document.documentElement.clientHeight;
```

2、**视觉视口（Visual Viewport）**

- 用户当前看到的屏幕区域
- 会受到缩放操作影响
- 在移动设备上可以比布局视口小

```javascript
// 视口宽度（包含滚动条）
const viewportWidth = window.innerWidth;

// 视口高度
const viewportHeight = window.innerHeight;
```

3、**理想视口（Ideal Viewport）**

- 设备理想的显示宽度
- 通过设置 `<meta name="viewport">` 实现

#### 布局视口和视觉视口取值的说明



## 视口Meta标签

```html
<!-- 最常用的视口设置 -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- 其他可用属性 -->
<meta name="viewport" content="
  width=device-width,      // 视口宽度等于设备宽度
  initial-scale=1.0,       // 初始缩放比例
  maximum-scale=1.0,       // 最大缩放比例
  minimum-scale=1.0,       // 最小缩放比例
  user-scalable=no,        // 禁止用户缩放
  viewport-fit=cover       // 全面屏适配
">
```

### 获取视口尺寸

#### CSS视口单位

```css
.element {
  width: 100vw;     /* 视口宽度的100% */
  height: 50vh;     /* 视口高度的50% */
  font-size: 5vmin;  /* 视口较小尺寸的5% */
  margin: 2vmax;     /* 视口较大尺寸的2% */
}
```

### 常见应用场景

1、**移动端适配**

```html
<meta name="viewport" content="width=device-width, initial-scale=1.0">
```

2、**响应式设计断点**

```css
/* 移动设备优先 */
@media (min-width: 768px) { /* 平板 */ }
@media (min-width: 992px) { /* 桌面 */ }
@media (min-width: 1200px) { /* 大屏幕 */ }
```

3、**防止移动端缩放**

```html
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
```

4、**全面屏适配**

```html
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
```

5、**JavaScript监听视口变化**

```javascript
// 监听视口大小变化
window.addEventListener('resize', () => {
  console.log(`视口尺寸: ${window.innerWidth} x ${window.innerHeight}`);
});

// 使用ResizeObserver监听元素尺寸变化
const observer = new ResizeObserver(entries => {
  for (let entry of entries) {
    console.log('元素尺寸变化:', entry.contentRect);
  }
});
```
