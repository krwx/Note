# 别名

- [别名](#别名)
  - [设置别名](#设置别名)
  - [使用别名加载图片](#使用别名加载图片)

## 设置别名

1、**配置 `vite.config.ts`**

可以使用 `path` 的 `resolve` 或者使用 `fileURLToPath` 和 `URL` 来配置别名，例如：

```typescript
// vite.config.ts
import { defineConfig } from 'vite'
import vue from '@vitejs/plugin-vue'
import { resolve } from 'path'

// 使用 path.resolve 配置别名
export default defineConfig({
  plugins: [vue()],
  resolve: {
    alias: {
      '@': path.resolve(__dirname, './src'),
      // '@': path.resolve(__dirname, 'src'), 和上面等价

      '@components': path.resolve(__dirname, './src/components'),
      '@views': path.resolve(__dirname, './src/views'),
      '@assets': path.resolve(__dirname, './src/assets'),
    }
  }
})

// 使用 `fileURLToPath` 和 `URL` 配置别名
import { fileURLToPath, URL } from 'node:url'
export default defineConfig({
  plugins: [
    vue(),
  ],
  resolve: {
    alias: {
      '@': fileURLToPath(new URL('./src', import.meta.url))
    }
  }
})
```

> `__dirname` 表示当前配置文件所在目录

2、**配置 `TypeScript`**

如果项目使用 `TypeScript`，为了让编辑器能够正确识别别名，需要在 `tsconfig.json` 中配置 `paths`：

```json
{
  "compilerOptions": {
    "baseUrl": ".",
    "paths": {
      "@/*": ["src/*"],
      "@components/*": ["src/components/*"],
      "@views/*": ["src/views/*"],
      "@assets/*": ["src/assets/*"]
    }
  },
  "include": ["src/**/*.ts", "src/**/*.d.ts", "src/**/*.tsx", "src/**/*.vue"]
}
```

3、**使用**

配置完成后，可以在项目中这样使用别名：

**vue 文件**：

```vue
<script setup>
// 使用别名导入组件
import HelloWorld from '@/components/HelloWorld.vue'
import { getUser } from '@api/user'
import { formatDate } from '@utils/date'
</script>

<template>
  <!-- 在模板使用别名导入图片 -->
  <img src="@assets/images/logo.png" alt="logo" />
</template>

<style scoped>
/* 在 CSS 中使用别名 */
.logo {
  background-image: url('@assets/images/bg.jpg');
}
</style>
```

**TypeScript 文件**：

```typescript
import type { User } from '@/types/user'
import { useStore } from '@store/index'
import { debounce } from '@utils/helper'
```

## 使用别名加载图片

1、**配置别名**

在 `vite.config.js`/`vite.config.ts` 中配置别名：

```javascript
import { defineConfig } from 'vite'
import vue from '@vitejs/plugin-vue'
import { resolve } from 'path'

export default defineConfig({
  plugins: [vue()],
  resolve: {
    alias: {
      '@': resolve(__dirname, 'src'),
      '@assets': resolve(__dirname, 'src/assets'),
      '@img': resolve(__dirname, 'src/assets/img')
    }
  }
})
```

2、**加载图片的几种方式**

方式一：**在模板中直接使用**

```html
<template>
  <div>
    <!-- 使用别名 -->
    <img :src="logo" alt="Logo" />
    <img src="@/assets/img/logo.png" alt="Logo" />
    <img src="@assets/img/logo.png" alt="Logo" />
    <img src="@img/logo.png" alt="Logo" />
  </div>
</template>
```

方式二：**在 script 中导入，在模板绑定导入的 URL**

```vue
<template>
  <div>
    <img :src="logoUrl" alt="Logo" />
    <img :src="logoPath" alt="Logo" />
  </div>
</template>

<script setup>
// 使用 import 导入（推荐）
import logoUrl from '@/assets/img/logo.png'

// 或使用 new URL 方式
const logoPath = new URL('@/assets/img/logo.png', import.meta.url).href
</script>
```

注意：不能直接将别名 URL 字符串变量绑定到 src，模板会直接加载别名 URL，而不是转换后的 URL， 例如：

```vue
<template>
  <div>
    <!-- 这里绑定的 url 就是 '@assets/img/logo.png' -->
    <img :src="logo" alt="Logo" />
  </div>
</template>

<script setup>
// 这样写是错误的
let logo = '@assets/img/logo.png'
</script>
```

方式三：**动态加载图片**

```vue
<template>
  <div>
    <img :src="getImageUrl('logo.png')" alt="Logo" />
    <img :src="images.logo" alt="Logo" />
  </div>
</template>

<script setup>
// 方法1：使用函数动态获取
const getImageUrl = (name) => {
  return new URL(`./assets/img/${name}`, import.meta.url).href
}

// 方法2：批量导入
const images = {
  logo: new URL('@/assets/img/logo.png', import.meta.url).href,
  banner: new URL('@/assets/img/banner.jpg', import.meta.url).href
}
</script>
```

方式四：**在 CSS 中使用**

```vue
<template>
  <div class="banner"></div>
</template>

<style scoped>
.banner {
  /* 使用别名 */
  background-image: url('@/assets/img/banner.jpg');
  /* 或 */
  background-image: url('@assets/img/banner.jpg');
  /* 或 */
  background-image: url('@img/banner.jpg');
  
  width: 100%;
  height: 200px;
  background-size: cover;
}
</style>
```
