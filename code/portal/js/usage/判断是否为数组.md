# 判断是否为数组

- [判断是否为数组](#判断是否为数组)
  - [1. **Array.isArray()** ✅ (推荐)](#1-arrayisarray--推荐)
  - [2. **instanceof Array**](#2-instanceof-array)
  - [3. **Object.prototype.toString.call()**](#3-objectprototypetostringcall)
  - [4. **constructor 属性**](#4-constructor-属性)
  - [5. **使用 Array.prototype.isPrototypeOf()**](#5-使用-arrayprototypeisprototypeof)

在 JavaScript 中，判断一个变量是否为数组有多种方法，下面是常用的几种：

## 1. **Array.isArray()** ✅ (推荐)

这是最标准、最可靠的方法，ES5+ 支持。

```javascript
const arr = [1, 2, 3];
const obj = {};

console.log(Array.isArray(arr)); // true
console.log(Array.isArray(obj)); // false
console.log(Array.isArray(null)); // false
console.log(Array.isArray(undefined)); // false
console.log(Array.isArray('string')); // false
```

## 2. **instanceof Array**

这个方法在大多数情况下有效，但在跨窗口/iframe 时可能有问题。

```javascript
const arr = [1, 2, 3];

console.log(arr instanceof Array); // true

// 问题：跨 iframe 时
const iframe = document.createElement('iframe');
document.body.appendChild(iframe);
const iframeArray = iframe.contentWindow.Array;
const myArray = new iframeArray(1, 2, 3);

console.log(myArray instanceof Array); // false ❌
console.log(Array.isArray(myArray)); // true ✅
```

## 3. **Object.prototype.toString.call()**

最通用的方法，可以判断所有类型。

```javascript
const arr = [1, 2, 3];

console.log(Object.prototype.toString.call(arr) === '[object Array]'); // true

// 也可以判断其他类型
console.log(Object.prototype.toString.call({}) === '[object Object]'); // true
console.log(Object.prototype.toString.call('') === '[object String]'); // true
```

## 4. **constructor 属性**

不推荐，因为 constructor 属性可能被修改。

```javascript
const arr = [1, 2, 3];

console.log(arr.constructor === Array); // true

// 可能被修改的问题
arr.constructor = Object;
console.log(arr.constructor === Array); // false ❌
```

## 5. **使用 Array.prototype.isPrototypeOf()**

```js
let arr = [1, 2, 3];
console.log(Array.prototype.isPrototypeOf(arr)) // true
```
