# http 版本的发展

- [http 版本的发展](#http-版本的发展)
  - [HTTP/1.0——构建可扩展性](#http10构建可扩展性)
  - [HTTP/1.1——标准化的协议](#http11标准化的协议)
  - [HTTP/2——为了更优异的表现](#http2为了更优异的表现)
  - [HTTP/3——基于 QUIC 的 HTTP](#http3基于-quic-的-http)
  - [HTTP1.0和HTTP2.0的区别](#http10和http20的区别)

## HTTP/1.0——构建可扩展性

由于 HTTP/0.9 协议的应用十分有限，浏览器和服务器迅速扩展内容使其用途更广：

- **协议版本信息**现在会随着每个请求发送（HTTP/1.0 被追加到了 GET 行）。
- **状态码**会在响应开始时发送，使浏览器能了解请求执行成功或失败，并相应调整行为（如更新或使用本地缓存）。
- 引入了 **HTTP 标头**的概念，无论是对于请求还是响应，允许传输元数据，使协议变得非常灵活，更具扩展性。
- 在新 HTTP 标头的帮助下，具备了传输除纯文本 HTML 文件以外其他类型文档的能力（凭借 Content-Type 标头）。

## HTTP/1.1——标准化的协议

HTTP/1.1 消除了大量歧义内容并引入了多项改进：

- **连接可以复用**，节省了多次打开 TCP 连接加载网页文档资源的时间。
- **增加管线化技术**，允许在第一个应答被完全发送之前就发送第二个请求，以降低通信延迟。
- 支持响应分块。
- 引入**额外的缓存控制机制**。
- 引入内容协商机制，包括语言、编码、类型等。并允许客户端和服务器之间约定以最合适的内容进行交换。
- 凭借 **Host 标头**，能够使不同域名配置在同一个 IP 地址的服务器上。

## HTTP/2——为了更优异的表现

HTTP/2 在 HTTP/1.1 有几处基本的不同：

- HTTP/2 是**二进制协议而不是文本协议**。**不再可读**，也不可无障碍的手动创建，改善的优化技术现在可被实施。
- 这是一个**多路复用协议**。并行的请求能在同一个链接中处理，移除了 HTTP/1.x 中顺序和阻塞的约束。
- **压缩了标头**。因为标头在一系列请求中常常是相似的，其移除了重复和传输重复数据的成本。
- 其允许**服务器在客户端缓存中填充数据**，通过一个叫服务器推送的机制来提前请求。

## HTTP/3——基于 QUIC 的 HTTP

在传输层部分使用 `QUIC` 而不是 `TCP`

`QUIC` 旨在为 `HTTP` 连接设计更低的延迟。类似于 `HTTP/2`，它是一个**多路复用协议**，但是 `HTTP/2` 通过单个 `TCP` 连接运行，所以在 `TCP` 层处理的数据包丢失检测和重传可以阻止所有流。

`QUIC` 通过 `UDP` 运行多个流，并为每个流独立实现数据包丢失检测和重传，因此如果发生错误，只有该数据包中包含数据的流才会被阻止。

## HTTP1.0和HTTP2.0的区别

1. 连接复用：
   - `HTTP1.0`：每个 `HTTP` 请求都需要建立一个新的 `TCP` 连接，请求结束后立即关闭连接。这样的方式会导致每个请求都需要重新建立连接，增加了延迟和开销。
   - `HTTP2.0`：引入了多路复用技术，允许在同一个 `TCP` 连接上并发发送多个请求和响应，避免了建立和关闭多个连接的开销，提高了性能和效率。
2. 请求-响应方式：
   - `HTTP1.0`：采用的是单向请求-响应模式，即每个请求只能对应一个响应，请求和响应是一一对应的关系。
   - `HTTP2.0`：引入了 `Server Push` 机制，服务器可以在客户端请求之前主动推送相关资源，避免了客户端重复请求的等待时间，提高了页面加载速度。
3. 头部压缩：
   - `HTTP1.0`：每个请求和响应的头部都包含大量的重复信息，造成了较大的网络传输开销。
   - `HTTP2.0`：使用了 `HPACK` 算法对头部进行压缩，减少了头部的大小，降低了网络传输开销。
4. 二进制协议：
   - `HTTP1.0`：采用**文本形式**进行数据传输，易于阅读和调试，但是传输效率较低。
   - `HTTP2.0`：采用**二进制格式**传输数据，减少了解析的复杂性，提高了传输效率。
5. 流控制和优先级：
   - `HTTP1.0`：没有流控制和优先级的概念，所有请求都是按照发送的顺序进行处理。
   - `HTTP2.0`：引入了流控制和优先级的机制，可以根据需求对请求进行优先级排序和流量控制，确保重要请求的及时处理。
6. 长连接支持：
   - `HTTP1.0`：基本上都是短连接，每个请求响应完成后立即关闭连接。
   - `HTTP2.0`：支持长连接，即一个 `TCP` 连接可以承载多个请求和响应，减少了连接的建立和关闭次数，提高了性能。
